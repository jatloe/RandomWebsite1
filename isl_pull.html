<!DOCTYPE html>
<html>
  <head>
    <link rel="icon" href="jatloesmile-hd.png">
    <title>ISL puller</title>
  </head>
  <body>
	<p>V1.2, 1998-2021</p>
	<p>Try searching "c1", "2019 1", "2006/c", and "1998 a1"</p>
	<p>There is a known bug where 2006 c8 redirects to 2006 g8 for some reason</p> <br>
	<input type="text" id="problemType">
	<input type="button" value="Search" onclick="getProblems()">
	<br> <br> <br>
	<div id="outside"><div id="container"></div></div>
  </body>
  
  <script>
	function makeImage(src) {
		let img = document.createElement("img");
		img.src = src;
		img.width = "1000";
		document.getElementById("container").appendChild(img);
		document.getElementById("container").appendChild(document.createElement("br"));
	}
  
	function getProblems() {
		document.getElementById("container").remove();
		let newDiv = document.createElement("div");
		newDiv.id = "container";
		document.getElementById("outside").appendChild(newDiv);
		
		let query = document.getElementById("problemType").value;
		let subjects = ["a","c","g","n"];
		
		let allProblemCodes = [];
		for (let j = 0; j <= 3; j++) {
			for (let i = 1; i <= 10; i++) {
				allProblemCodes.push(" "+subjects[j]+i);
				allProblemCodes.push("/"+subjects[j]+i);
			}
		}
		
		let isFullCode = false;
		
		for (let i = 0; i < allProblemCodes.length; i++) {
			if (query.endsWith(allProblemCodes[i])) isFullCode = true;
		}
		
		if (isFullCode) {
			makeImage("https://ggim.me/images/imo_shortlist/" + query.replace(" ","/"));
		} else if (query.includes("/a") || query.includes("/c") || query.includes("/g") || query.includes("/n") || query.includes(" a") || query.includes(" c") || query.includes(" g") || query.includes(" n")) {
			for (let i = 1; i <= 10; i++) {
				makeImage("https://ggim.me/images/imo_shortlist/" + query.replace(" ","/") + i);
			}
		} else if (!(query.includes("a") || query.includes("c") || query.includes("g") || query.includes("n"))) {
			for (let i = 0; i <= 3; i++) {
				makeImage("https://ggim.me/images/imo_shortlist/" + query.replace(" ","/").replace("/","/"+subjects[i]));
			}
		} else {
			for (let i = 1998; i <= 2021; i++) {
				makeImage("https://ggim.me/images/imo_shortlist/" + i + "/" + query);
			}
		}
	}
	
	document.onkeyup = function(e) {
        if (e.which == 13) {
            getProblems();
        }
    };
  </script>
</html>
