<!DOCTYPE html>
<html>
  <head>
    <link rel="icon" href="jatloesmile-hd.png">
    <style>
      .side{
        display: inline;
      }
    </style>
  </head>
  <body>
    <h3 id="points">You have 1 points.</h3>
    <p class="side" id="boostDisplay">Boost: 1</p>
    <button type="button" onclick="buyBoost()" id="boost">Buy boost: 100 points</button>
    <br>
    <p class="side" id="gen1Display">Generator 1: 1</p>
    <button type="button" onclick="buyGen(1)" id="gen1">1 -> 1</button>
  </body>
  <script>
    let points = 1;
    let gencount = [1,1,1,1,1,1];
    let boost = 1;
    let IP = 0;
    let rate = 1;
    setInterval(update,50);
    
    function update() {
      rate = gencount[0]*gencount[1]*gencount[2]*gencount[3]*gencount[4]*gencount[5]*boost*Math.pow(1+IP,3);
      points = points + rate;
      document.getElementById("points").innerHTML = "You have " + goodNumber(points) + " points.";
      document.getElementById("gen1Display") = "Generator 1: " + String(gencount[0]);
      document.getElementById("gen1").innerHTML = stringify(gencount[0]) + " -> " + stringify(Math.sqrt(points));
      document.getElementById("boost").innerHTML = "Buy boost: " + String(boostCost(boost)) + " points";
      document.getElementById("boostDisplay").innerHTML = "Boost: " + String(boost);
    }
      
    function goodNumber(number) {
      return Math.round(number*1000)/1000;
    }
    
    function stringify(number) {
      number = goodNumber(number);
      if(number<1000000) {
        let stringy = String(number*1000);
        return stringy.slice(0,-3) + "." + stringy.slice(-3);
      } else {
        let power = Math.floor(Math.log10(number));
        number = Math.round(number/Math.pow(10,power-3));
        let stringy = String(number);
        return stringy.slice(0,-3) + "." + stringy.slice(-3) + "e" + String(power);
      }
    }
    
    function log(a,b) {
      return Math.round(Math.log(b) / Math.log(a));
    }
    
    function boostCost(x) {
      return Math.pow(10,Math.pow(2,log(3,x)+1));
    }
    
    function buyBoost() {
      if(points>=boostCost(boost)) {
        points = points - boostCost(boost);
        boost = boost * 3;
        update();
      }
    }
  </script>
</html>
