<!DOCTYPE html>
<html>
  <head>
    <link rel="icon" href="jatloesmile-hd.png">
    <title>CDR Simulator</title>
    <style>
      .side{
        display: inline;
      }
    </style>
  </head>
  <body>
    <p>V1.2</p>
    <button type="button" onclick="buzz()" id="buzzbutton" class="side">Buzz</button>
    <input type="text" id="answer" class="side" disabled>
    <p id="result" class="side"></p>
  </body>
  <script>
    let buzzed = false;
    let answer = "69";
    let buzzleft = 5;
    function buzz() {
      if (document.getElementById("buzzbutton").disabled == false && !buzzed) {
        document.getElementById("buzzbutton").disabled = true;
        document.getElementById("answer").disabled = false;
        document.getElementById("answer").focus();
        buzzed = true;
        buzzTimeUpdate();
      }
    }
    function buzzTimeUpdate() {
      if (buzzleft == 0) {
        closeBuzz();
      } else {
        setTimeout(buzzTimeUpdate,1000);
        buzzleft -= 1;
        document.getElementById("result").innerHTML = String(buzzleft);
      }
    }
    function closeBuzz() {
      document.getElementById("buzzbutton").disabled = true;
      document.getElementById("answer").disabled = true;
      if (document.getElementById("answer").value == answer) {
        document.getElementById("result").innerHTML = "Correct!";
      } else {
        document.getElementById("result").innerHTML = "Incorrect.";
      }
    }
    document.onkeyup = function(e) {
      if (e.which == 66) {
          buzz();
      }
    };
  </script>
</html>
