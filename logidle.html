<!DOCTYPE html>
<html>
  <head>
    <link rel="icon" href="jatloesmile-hd.png">
    <title>Log Idle</title>
    <style>
      .side{
        display: inline;
      }
      body {
        font-family: 'Monospace Typewriter', monospace;
        font-size: 15px;
      }
    </style>
  </head>
  <body>
    <p>V1.10</p>
    <h3 id="logs" style="font-size:18px;">You have 0 logs.</h3>
    <br><br>
    <p class="side" id="tree1Display">Maple Trees: 1</p>
    <button type="button" onclick="buyTree(1)" id="tree1" class="side">Buy Maple Tree</button>
    <br>
    <p class="side" id="tree2Display">Oak Trees: 0</p>
    <button type="button" onclick="buyTree(2)" id="tree2" class="side">Buy Oak Tree</button>
    <br>
    <p class="side" id="tree3Display">Palm Trees: 0</p>
    <button type="button" onclick="buyTree(3)" id="tree3" class="side">Buy Palm Tree</button>
    <br>
    <p class="side" id="tree4Display">Willow Trees: 0</p>
    <button type="button" onclick="buyTree(4)" id="tree4" class="side">Buy Willow Tree</button>
    <br>
    <p class="side" id="tree5Display">Poplar Trees: 0</p>
    <button type="button" onclick="buyTree(5)" id="tree5" class="side">Buy Poplar Tree</button>
    <br>
    <p class="side" id="tree6Display">Elm Trees: 0</p>
    <button type="button" onclick="buyTree(6)" id="tree6" class="side">Buy Elm Tree</button>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/break_infinity.js"></script>
  <script>
    /*
        For the above, note that the class "side" should be in all buttons/text in the same row,
        then put a <br> afterwards. Also, the id="thing" is how you would be able to reference things.
        You use document.getElementById("ID_HERE").innerHTML = "NEW_TEXT" to change the text.
        <p> is text, <button> is button. Remember to close them with </p> and </button>.
        When it has style="display: none;" it means it's hidden, use
        document.getElementById("ID_HERE").style.display = ""; for showing and
        document.getElementById("ID_HERE").style.display = "none"; for hiding
    */
    
    //Basic setup
    let logs = new Decimal(0);
    let baseTrees = [new Decimal(1),new Decimal(0),new Decimal(0),new Decimal(0),new Decimal(0),new Decimal(0)];
    let treeNames = ["Maple","Oak","Palm","Willow","Poplar","Elm"];
    setInterval(update,50);
    //Power is Math.pow(base,exponent) so Math.pow(2,3)=8
    
    function update() {
      for(let i=0;i<6;i++) {
        logs = logs.add(baseTrees[i].times(i+1));
      }
      document.getElementById("logs").innerHTML = `You have ${make_string(logs)} logs.`;
      for(let j=0;j<6;j++) {
        document.getElementById(`tree${(j+1).toString()}Display`).innerHTML = `${treeNames[j]} Trees: ${make_string(baseTrees[j])}`;
      }
    }
        
    
    function buyTree(treeNum) {
      if(logs >= exp(treeNum-1)) {
        baseTrees[treeNum-1] = baseTrees[treeNum-1].add(1);
        logs.minus(exp(treeNum-1));
      }
    }
    
    //This function turns numbers into nice numbers(make_string(1234567)=1.234e6)
    function make_string(number) {
      if(number<1000000) {
        return number.toFixed(3);
      } else if(isFinite(number)) {
        let power = Math.floor(Math.log10(number));
        number = number/Math.pow(10,power);
        return number.toFixed(3) + "e" + String(power);
      } else if(isNaN(number)) {
        return "NaN";
      } else {
        return "Infinity";
      }
    }
    
    //Log function because I can't find it anywhere
    function log(a,b) {
      return Math.round(Math.log(b) / Math.log(a));
    }    
    
    //Hotkeys, keycodes are here https://www.toptal.com/developers/keycode
    document.onkeyup = function(e) {
        if (e.which == 49 || e.which == 97) {
          buyTree(1);
        } else if (e.which == 50 || e.which == 98) {
          buyTree(2);
        } else if (e.which == 51 || e.which == 99) {
          buyTree(3);
        } else if (e.which == 52 || e.which == 100) {
          buyTree(4);
        } else if (e.which == 53 || e.which == 101) {
          buyTree(5);
        } else if (e.which == 54 || e.which == 102) {
          buyTree(6);
        }
    };
  </script>
</html>
